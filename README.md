# REST-assured Restful-Booker Test Project

This repository contains a simple REST-assured test framework for running integration tests against the Restful-Booker 
Web API by Mark Winteringham. The Restful-Booker API offers authentication, CRUD operations, and contains a number of
bugs for learning purposes.

I wanted to utilise the Testcontainers library to run the Restful-Booker API in a Docker container, ensuring that each 
test run is isolated and does not affect the state of the system. This is especially important when running integration 
tests using a database. 

I normally use a combination of JUnit and AssertJ for writing tests, but for this project I decided to write the 
assertions using Hamcrest.  

## Tests

The test framework contains approximately 40 tests ensuring each endpoint of the Restful-Booker API is tested. 

- /auth     - generate authentication tokens
- /booking  - CRUD operations for booking records
- /ping     - health check

The tests cover the following:

- `GET` requests
- `POST` requests
- `PUT` requests
- `PATCH` requests
- `DELETE` requests
- Request Payloads in JSON and XML formats
- Different types of Authentication (cookie and Authorization header) 
- Response headers verification
- Response Body verification
- Response Status Code verification
- Response payloads in JSON and XML formats
- Assertions using Hamcrest Matchers
- Use of Lombok and Java `POJO` for passing values to `POST`, `PUT` and `PATCH` request bodies
- Use of Datafaker for generating random fake test data and using it in automated tests
 
I will also need to update the issues found section as I have identified further problems.

_This line is a test commit_

## Framework Components

The test framework utilises the following components:

- Java 17
- JUnit 5 
- Maven
- Git
- REST-assured 
- Hamcrest Matchers
- Docker Desktop 4.27.2
- Testcontainers
- Testcontainers JUnit 5 Extension
- Lombok
- Datafaker

Check the POM file for component versions.

### Testcontainers

![Testcontainers Logo](/assets/images/testcontainers-logo.svg)

Testcontainers is a Java library that supports JUnit tests, providing lightweight, throwaway instances of anything that 
can run in a Docker container. The extension supports two modes:

1. Containers that are restarted for every test method.
2. Containers that are shared between all methods of a test class.

In this project, Testcontainers is used in mode 2, to spin up an instance of the Restful-Booker Docker image, where all
tests against the API are executed. Once the tests are finished, the instance is torn down, and everything is restored
to its initial state for the next run. 

This highlights the necessity of clearing the data generated by automated tests. Failing to do so would result in the 
accumulation of junk data in the system, possibly leading to unpredictable results, unnecessary server load and database
size. Since every test run generates a new set of booking records, it's crucial to clean up after each run to maintain 
system efficiency.

For more information, visit the [Testcontainers website](https://testcontainers.com).

### restful-booker

Restful-Booker is a Web API playground created by Mark Winteringham for learning about API testing or trying out API 
testing tools. It offers authentication, CRUD operations, and comes preloaded with 10 records, resetting itself every 
10 minutes to its default state. Detailed API documentation is available to help get started with API testing immediately.

For further details, refer to Mark's website [here](https://restful-booker.herokuapp.com), and the API documentation
[here](https://restful-booker.herokuapp.com/apidoc/index.html).

The Docker image for Restful-Booker can be found [here](https://github.com/mwinteringham/restful-booker).

### Datafaker

Datafaker is a library for Java and Kotlin to generate fake data. It is useful for generating test data to fill a database, 
for stress testing, or for anonymizing data from production services.

Previously, the Java Faker library was used, but since it hadn't seen any activity on Maven Central since 2020, Datafaker 
was chosen as a replacement. Datafaker is a modern fork of Java Faker, updated to Java 8 and improved. The Datafaker API 
is compatible with Java Faker, making migration seamless.

For more information, you can read the introductory article on Datafaker on the [Baeldung](https://www.baeldung.com) 
website, titled [Introduction to Datafaker](https://www.baeldung.com/java-datafaker).

For further details, visit the [Datafaker website](https://www.datafaker.net).

## Requirements

This example was written using the following:

- Java 17
- Maven
- Git
- REST-assured [here](https://rest-assured.io)
- Docker [here](https://www.docker.com)


## Usage

To run the test framework, follow these steps:

1. Clone the repository:
```
git clone https://github.com/dsmiles/rest-assured-booker.git
cd rest-assured-booker
```

2. Run Maven test command:
```
mvn test
```

## Issues Found

While testing the Restful Booker API, I encountered several issues that are worth noting. The list of issues found has 
been moved to file [Issues Found](ISSUES.md).
